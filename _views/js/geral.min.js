/////////////////////////////////////////////////////////////////////
//faixa preço busca detalhada
function carrega_bairros(cidade){

    var endereco_arquivo = dominio()+'bairros';
    $.post(endereco_arquivo, {cidade: cidade},function(data){
        if(data){
            $('#bairros_lista').html(data);
        }        
    });
}
function carrega_bairros_principal(cidade){

    var endereco_arquivo = dominio()+'bairros_principal';
    $.post(endereco_arquivo, {cidade: cidade},function(data){
        if(data){
            //alert(data);
            $('#bairros_lista_principal').html(data);
            numero_imoveis();

        }
    });
}
/////////////////////////////////////////////////////////////////////
//faixa preço busca detalhada
function troca_faixa_preco(tipo){
    if(tipo == 'alugar'){
        $('#preco_alugar').show();
        $('#preco_comprar').hide();
    } else {
        $('#preco_alugar').hide();
        $('#preco_comprar').show();
    }
}

/////////////////////////////////////////////////////////////////////
//Favoritos
function favoritos(codigo){

    $('#imovel_fav_'+codigo).html("<img src='"+dominio()+"img/loading.gif' style='width:15px;' >");

    var endereco_arquivo = dominio()+'fav';
    $.post(endereco_arquivo, {codigo: codigo},function(data){
        if(data){
            //alert(data);
            if(data == 'inativo'){
                $('#imovel_fav_'+codigo).html("<a class='botao_favoritos' onClick=\"favoritos('"+codigo+"');\"; ><i class='fa fa-heart' aria-hidden='true' ></i></a>");
            } else {
                $('#imovel_fav_'+codigo).html("<a class='botao_favoritos ativo' onClick=\"favoritos('"+codigo+"');\";  ><i class='fa fa-heart' aria-hidden='true' ></i></a>");
            }
        }
        calcula_favoritos();
    });

}

/////////////////////////////////////////////////////////////////////
//imagens inicial
function slideSwitch() {
    var $active = $('#slideshow DIV.active');

    if ( $active.length == 0 ) $active = $('#slideshow DIV:last');

    // use this to pull the divs in the order they appear in the markup
    var $next =  $active.next().length ? $active.next()
    : $('#slideshow DIV:first');

    $active.addClass('last-active');

    $next.css({opacity: 0.0})
    .addClass('active')
    .animate({opacity: 1.0}, 1000, function() {
        $active.removeClass('active last-active');
    });
}

/////////////////////////////////////////////////////////////////////
//Menu
$("#menu_responsivo_botao").click(function(){
    $("#menu_responsivo").toggle();
});
$("#menu_responsivo a").click(function(){
    $("#menu_responsivo").toggle();
});

/////////////////////////////////////////////////////////////////////
//Carrega o numero de imoveis na busca
function numero_imoveis(){

    var categoria = $("#categoria option:selected").val();
    var tipo = $("#tipo option:selected").val();
    var cidade = $("#cidade_principal option:selected").val();
    var bairro = $("#bairro_principal option:selected").val();

    var endereco_arquivo = dominio()+'calcula_imoveis';
    $.post(endereco_arquivo, {categoria: categoria, tipo: tipo, cidade: cidade, bairro: bairro},function(data){
        if(data){
            $('#numero_imoveis').html(0);
        } else {
            $('#numero_imoveis').html('Nenhum resultado');
        }
    });
}

/////////////////////////////////////////////////////////////////////
//Carrega o numero de favoritos
function calcula_favoritos(){ 
    $('.variavel_favoritos').html(0);
}